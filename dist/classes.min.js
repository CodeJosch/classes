/*

*/
var classes=function(){var c=function(){};c.version="0.2.0";c.defined={core:{}};(function(a){["String","Boolean","Date","Number"].forEach(function(b){c.defined.core[b]=a[b]})})("undefined"!==typeof window?window:global);c.warn=function(){console.warn(arguments)};c.instancesCreated=0;c.merge=function(){var a=arguments[0],b;if(null===a||"object"!==typeof a)return{};for(b=1;b<arguments.length;b++){var d=arguments[b];if(null!==d&&"object"===typeof d)for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])}return a};
c.clone=function(a){return c.deserialize(c.serialize(a))};c.unlazy=function(a){if(!a||"object"!==typeof a)return a;if(a.__currentlyUnlazied)return c.warn("Cannot unlazy in circles",a),a;a.__currentlyUnlazied=!0;if(a instanceof Array)for(var b=0,d=a.length;b<d;b++)a[b]=c.unlazy(a[b]);else if(a instanceof Object){if(a._classname&&"function"!==typeof a.prop)return c.createInstance(a._classname,a.param);for(b in a)a.hasOwnProperty(b)&&"__currentlyUnlazied"!==b&&(a[b]=c.unlazy(a[b]))}delete a.__currentlyUnlazied;
return a};c.serialize=function(a){var b=function(a){var e;if(null===a||"object"!==typeof a)return a;if(a.__currentlyPrepped)return c.warn("Cannot serialize in circles",a),{};for(e in c.defined.core)if(a instanceof c.defined.core[e])return{_classname:"core."+e,param:a.valueOf()};a.__currentlyPrepped=!0;if(a instanceof Array){e=[];for(var f=0,g=a.length;f<g;f++)e[f]=b(a[f]);delete a.__currentlyPrepped;return e}if(a instanceof Object){e={};if(a._classname&&"function"===typeof a.props)e={_classname:a._classname,
param:b(a.props())};else for(f in a)a.hasOwnProperty(f)&&"__currentlyPrepped"!==f&&(e[f]=b(a[f]));delete a.__currentlyPrepped;return e}delete a.__currentlyPrepped;c.warn("Could not serialze",a);return a};return JSON.stringify(b(a))};c.deserialize=function(a){return c.unlazy(JSON.parse(a))};c.forName=function(a){a=a.split(".");for(var b=c.defined,d=0,e=a.length-1;d<e&&b[a[d]];d++)b=b[a[d]];return b[a[a.length-1]]};c.createInstance=function(a,b){if("string"===typeof a){var d=c.forName(a);return d?new d(b):
(c.warn("Class "+a+" not found."),null)}return new this(a)};c.define=function(){var a=c,b,d={};3<=arguments.length?(a=c.forName(arguments[0]),b=arguments[1],d=arguments[2]):2===arguments.length?(b=arguments[0],d=arguments[1]):1===arguments.length&&(d=arguments[0]);return a.extend(b,d)};c.prototype._classname="Class";c.prototype.defaults={};c.prototype.toString=function(){return this._classname+"("+c.serialize(this.props())+")"};c.prototype.instanceOf=function(a){for(var b=this;b;){if(b._classname===
a)return!0;if(!b._super)break;b=b._super.prototype}return!1};c.prototype.clone=function(){return new this(c.clone(this.props()))};c.prototype.serialize=function(){return c.serialize(this)};c.prototype.init=function(a){var b={};c.merge(b,JSON.parse(c.serialize(this.defaults)),a);b=c.unlazy(b);this.setProp=function(a,c){b[a]=c};this.unsetProp=function(a){"undefined"!==typeof b[a]&&delete b[a]};this.prop=function(a){return b[a]};this.props=function(){return b};this.id=++c.instancesCreated};c.extend=
function(){var a,b;2===arguments.length&&"string"===typeof arguments[0]?(a=arguments[0],b="function"===typeof arguments[1]?{init:arguments[1]}:arguments[1]):b=1===arguments.length?"function"===typeof arguments[0]?{init:arguments[0]}:arguments[0]:{};var d=b.init?b.init:void 0,e=function(a){if(!this._initializing){var b=this._super,c=[];for(this.init&&c.push(this.init);b;)b.prototype.init&&c.push(b.prototype.init),b=b.prototype._super;for(b=c.length-1;0<=b;b--)c[b].call(this,a)}};this.prototype._initializing=
!0;var f=e.prototype=new this;f._super=this;"undefined"!==typeof a&&(f._classname=a);delete this.prototype._initializing;var g;g=b.defaults?c.merge({},f.defaults,b.defaults):c.merge({},f.defaults);c.merge(f,this,b);f.init=d;f.defaults=JSON.parse(c.serialize(g));e.extend=function(){return c.extend.apply(e,arguments)};e.createInstance=function(){return c.createInstance.apply(e,arguments)};if(a){a=a.split(".");b=c.defined;d=0;for(f=a.length-1;d<f;d++)b[a[d]]||(b[a[d]]={}),b=b[a[d]];b[a[a.length-1]]=
e}return e};return c}();"undefined"!==typeof module&&(module.exports=classes);
