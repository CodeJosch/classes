(function(d){(function(a){d.core={};["String","Boolean","Date","Number"].forEach(function(c){d.core[c]=a[c]})})("undefined"!==typeof window?window:global);d.warn=function(){console.warn(arguments)};d.merge=function(){var a=arguments[0],c;if(null===a||"object"!==typeof a)return{};for(c=1;c<arguments.length;c++){var b=arguments[c];if(null!==b&&"object"===typeof b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}return a};d.clone=function(a){return d.deserialize(d.serialize(a))};d.serialize=function(a){var c=
function(b){var a;if(null===b||"object"!==typeof b)return b;if(b.__currentlyPrepped)return d.warn("Cannot serialize in circles",b),{};for(a in d.core)if(b instanceof d.core[a])return{_classname:"core."+a,param:b.valueOf()};b.__currentlyPrepped=!0;if(b instanceof Array){a=[];for(var e=0,g=b.length;e<g;e++)a[e]=c(b[e]);delete b.__currentlyPrepped;return a}if(b instanceof Object){a={};if(b._classname)a={_classname:b._classname,param:c(b.props())};else for(e in b)b.hasOwnProperty(e)&&"__currentlyPrepped"!==
e&&(a[e]=c(b[e]));delete b.__currentlyPrepped;return a}delete b.__currentlyPrepped;d.warn("Could not serialze",b);return b};return JSON.stringify(c(a))};d.deserialize=function(a){var c=function(b){var a;if(null===b||"object"!==typeof b)return b;if(b instanceof Array){a=[];for(var e=0,g=b.length;e<g;e++)a[e]=c(b[e]);return a}if(b instanceof Object){a={};if(b._classname)return d.createInstance(b._classname,b.param);for(e in b)b.hasOwnProperty(e)&&(a[e]=c(b[e]));return a}d.warn("Could not unprep ",b)};
return c(JSON.parse(a))};d.forName=function(a){a=a.split(".");for(var c=d,b=0,f=a.length-1;b<f&&c[a[b]];b++)c=c[a[b]];return c[a[a.length-1]]};d.createInstance=function(a,c){var b=d.forName(a);return b?new b(c):(d.warn("Class "+a+" not found."),null)};d.extend=function(){var a=d.Class,c,b={};3<=arguments.length?(a=d.forName(arguments[0]),c=arguments[1],b=arguments[2]):2===arguments.length?(c=arguments[0],b=arguments[1]):1===arguments.length&&(b=arguments[0]);return a.extend(c,b)};d.Class=function(a){};
d.Class.prototype._classname="Class";d.Class.prototype.defaults={};d.Class.prototype.toString=function(){return this._classname+"("+d.serialize(this.props())+")"};d.Class.prototype.instanceOf=function(a){for(var c=this;c;){if(c._classname===a)return!0;if(!c._super)break;c=c._super.prototype}return!1};d.Class.prototype.clone=function(){return new this(d.clone(this.props()))};d.Class.prototype.serialize=function(){return d.serialize(this)};d.Class.prototype.init=function(a){var c={};d.merge(c,d.clone(this.defaults),
a);this.setProp=function(b,a){c[b]=a};this.unsetProp=function(b){"undefined"!==typeof c[b]&&delete c[b]};this.prop=function(b){return c[b]};this.props=function(){return c}};d.Class.createInstance=function(a){return new this(a)};d.Class.extend=function(){var a,c;2===arguments.length&&"string"===typeof arguments[0]?(a=arguments[0],c="function"===typeof arguments[1]?{init:arguments[1]}:arguments[1]):c=1===arguments.length?"function"===typeof arguments[0]?{init:arguments[0]}:arguments[0]:{};var b=c.init?
c.init:void 0,f=function(b){if(!this._initializing){var a=this._super,c=[];for(this.init&&c.push(this.init);a;)a.prototype.init&&c.push(a.prototype.init),a=a.prototype._super;for(a=c.length-1;0<=a;a--)c[a].call(this,b)}};this.prototype._initializing=!0;var e=f.prototype=new this;e._super=this;"undefined"!==typeof a&&(e._classname=a);delete this.prototype._initializing;var g;g=c.defaults?d.merge({},e.defaults,c.defaults):d.merge({},e.defaults);d.merge(e,this,c);e.init=b;e.defaults=d.clone(g);f.extend=
function(){return d.Class.extend.apply(f,arguments)};f.createInstance=function(){return d.Class.createInstance.apply(f,arguments)};if(a){a=a.split(".");c=d;b=0;for(e=a.length-1;b<e;b++)c[a[b]]||(c[a[b]]={}),c=c[a[b]];c[a[a.length-1]]=f}return f}})("undefined"!==typeof module?module.exports={}:classes={});
